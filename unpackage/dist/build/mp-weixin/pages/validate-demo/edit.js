"use strict";const e=require("../../common/vendor.js"),a=require("../../js_sdk/validator/validate-demo.js"),o=e.tr.database();function t(e){let o={};for(let t in a.validator)e.indexOf(t)>-1&&(o[t]=a.validator[t]);return o}const l={data:()=>({formData:{type:-1,type_name:"",comment:"",username:"",email:"",dowload_url:"",weight:null,favorite_book:"",party_member:null,hobby:[],address:""},formOptions:{type_localdata:[{text:"个人",value:0},{text:"企业",value:1}],hobby_localdata:[{text:"唱歌",value:"Sing"},{text:"跳舞",value:"dance"},{text:"画画",value:"draw"}]},rules:{...t(["type","type_name","comment","username","email","dowload_url","weight","favorite_book","party_member","hobby","address"])}}),onLoad(e){const a=e.id;this.formDataId=a,this.getDetail(a)},onReady(){this.$refs.form.setRules(this.rules)},methods:{submit(){e.index.showLoading({mask:!0}),this.$refs.form.submit().then((e=>{this.submitForm(e)})).catch((a=>{e.index.hideLoading()}))},submitForm(a){o.collection("validate-demo").doc(this.formDataId).update(a).then((a=>{e.index.showToast({icon:"none",title:"修改成功"}),this.getOpenerEventChannel().emit("refreshData"),setTimeout((()=>e.index.navigateBack()),500)})).catch((a=>{e.index.showModal({content:a.message||"请求服务失败",showCancel:!1})})).finally((()=>{e.index.hideLoading()}))},getDetail(a){e.index.showLoading({mask:!0}),o.collection("validate-demo").doc(a).field("type,type_name,comment,username,email,dowload_url,weight,favorite_book,party_member,hobby,address").get().then((e=>{const a=e.result.data[0];a&&(this.formData=a)})).catch((a=>{e.index.showModal({content:a.message||"请求服务失败",showCancel:!1})})).finally((()=>{e.index.hideLoading()}))}}};if(!Array){(e.resolveComponent("uni-data-checkbox")+e.resolveComponent("uni-forms-item")+e.resolveComponent("uni-easyinput")+e.resolveComponent("uni-data-picker")+e.resolveComponent("uni-forms"))()}Math||((()=>"../../uni_modules/uni-data-checkbox/components/uni-data-checkbox/uni-data-checkbox.js")+(()=>"../../uni_modules/uni-forms/components/uni-forms-item/uni-forms-item.js")+(()=>"../../uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput.js")+(()=>"../../uni_modules/uni-data-picker/components/uni-data-picker/uni-data-picker.js")+(()=>"../../uni_modules/uni-forms/components/uni-forms/uni-forms.js"))();const n=e._export_sfc(l,[["render",function(a,o,t,l,n,m){return{a:e.o((e=>n.formData.type=e)),b:e.p({multiple:!1,localdata:n.formOptions.type_localdata,modelValue:n.formData.type}),c:e.p({name:"type",label:"主体",required:!0}),d:e.o((e=>n.formData.type_name=e)),e:e.p({placeholder:"企业输入公司名称，个人输入姓名",modelValue:n.formData.type_name}),f:e.p({name:"type_name",label:"主体名称",required:!0}),g:e.o((e=>a.binddata("comment",e.detail.value))),h:n.formData.comment,i:e.p({name:"comment",label:"备注"}),j:e.o((e=>n.formData.username=e)),k:e.p({placeholder:"正则，限输入中文",modelValue:n.formData.username}),l:e.p({name:"username",label:"负责人姓名"}),m:e.o((e=>n.formData.email=e)),n:e.p({placeholder:"邮箱",modelValue:n.formData.email}),o:e.p({name:"email",label:"邮箱"}),p:e.o((e=>n.formData.dowload_url=e)),q:e.p({placeholder:"如：https://uniapp.dcloud.io",modelValue:n.formData.dowload_url}),r:e.p({name:"dowload_url",label:"下载地址"}),s:e.o((e=>n.formData.weight=e)),t:e.p({placeholder:"限输入 >50 && <=500",type:"number",modelValue:n.formData.weight}),v:e.p({name:"weight",label:"体重"}),w:e.o((e=>n.formData.favorite_book=e)),x:e.p({collection:"book",field:"title as text, _id as value",orderby:"desc",modelValue:n.formData.favorite_book}),y:e.p({name:"favorite_book",label:"喜欢的书"}),z:e.o((e=>a.binddata("party_member",e.detail.value))),A:n.formData.party_member,B:e.p({name:"party_member",label:"是否为党员"}),C:e.o((e=>n.formData.hobby=e)),D:e.p({multiple:!0,localdata:n.formOptions.hobby_localdata,modelValue:n.formData.hobby}),E:e.p({name:"hobby",label:"业余爱好"}),F:e.o((e=>n.formData.address=e)),G:e.p({"self-field":"code","parent-field":"parent_code",collection:"opendb-city-china",orderby:"value asc",field:"code as value, name as text",modelValue:n.formData.address}),H:e.p({name:"address",label:"地址"}),I:e.o(((...e)=>m.submit&&m.submit(...e))),J:e.sr("form","63ca9155-0"),K:e.p({value:n.formData,"validate-trigger":"submit","err-show-type":"toast"})}}]]);wx.createPage(n);
