"use strict";const e=require("../../common/vendor.js"),n={components:{EmbedCalendar:()=>"../../components/fd-EmbedCalendar/fd-EmbedCalendar.js"},data:()=>({userAvatar:"/static/user-avatar.png",customGreeting:"豹豹杯杯儿，今天也要加油哦！",signedDates:[],allRili:[],dayInfo:[]}),onLoad(){this.getList()},onShareAppMessage:function(){return{title:"宇青青宇全肯定",path:"/pages/cloudFunction/cloudFunction"}},onShareTimeline:function(){return{title:"宇青青宇全肯定"}},methods:{handleDateClick(e){console.log("选中日期:",e);let{month:n,day:t,date:o}=e;this.getDetail(o)},handleMonthChange(e){console.log("月份变化:",e)},handleTodayPlanClick(){this.getDetail()},add(){e.index.showLoading({title:"处理中..."}),e.tr.callFunction({name:"rili-add",data:{product:"uniCloud",create_time:Date.now()}}).then((n=>{e.index.hideLoading(),e.index.showModal({content:`成功添加一条数据，文档id为：${n.result.id}`,showCancel:!1})})).catch((n=>{e.index.hideLoading(),e.index.showModal({content:`添加数据失败，错误信息为：${n.message}`,showCancel:!1}),console.error(n)}))},remove(){e.index.showLoading({title:"处理中..."}),e.tr.callFunction({name:"remove"}).then((n=>{e.index.hideLoading(),e.index.showModal({content:n.result.msg,showCancel:!1}),console.log(n)})).catch((n=>{e.index.hideLoading(),e.index.showModal({content:`删除失败，错误信息为：${n.message}`,showCancel:!1}),console.error(n)}))},update(){e.index.showLoading({title:"处理中..."}),e.tr.callFunction({name:"update",data:{product:"uni-app",create_time:Date.now()}}).then((n=>{e.index.hideLoading(),e.index.showModal({content:n.result.msg,showCancel:!1}),console.log(n)})).catch((n=>{e.index.hideLoading(),e.index.showModal({content:`更新操作执行失败，错误信息为：${n.message}`,showCancel:!1}),console.error(n)}))},getList(){e.index.showLoading({title:"处理中..."}),e.tr.callFunction({name:"rili-get"}).then((n=>{e.index.hideLoading(),this.allRili=JSON.parse(JSON.stringify(n.result.data)),this.getDetail();const t=n.result.data.map((e=>{let n=e.date.split("-");return n.shift(),n.join("-")}));this.signedDates=[...new Set(t)]})).catch((n=>{e.index.hideLoading(),e.index.showModal({content:`查询失败，错误信息为：${n.message}`,showCancel:!1}),console.error(n)}))},getDetail(e){const n=e?new Date(e.replace(/-/g,"/")):new Date,t=n.getMonth()+1,o=n.getDate();this.dayInfo=this.allRili.filter((n=>{const a=new Date(n.date.replace(/-/g,"/")),i=a.getMonth()+1,d=a.getDate();return console.log(e,t,o,i,d,n),t===i&&o===d}))},useCommon(){console.log("请确保自己已经阅读并按照公用模块文档操作 https://uniapp.dcloud.io/uniCloud/cf-common"),e.tr.callFunction({name:"use-common"}).then((n=>{e.index.hideLoading(),e.index.showModal({content:"云函数use-common返回结果："+JSON.stringify(n.result),showCancel:!1}),console.log(n)})).catch((n=>{e.index.hideLoading(),e.index.showModal({content:`云函数use-common执行失败，错误信息为：${n.message}`,showCancel:!1}),console.error(n)}))},toRedisPage(){e.index.navigateTo({url:"/pages/cloudFunction/redis/redis"})}}};if(!Array){e.resolveComponent("EmbedCalendar")()}const t=e._export_sfc(n,[["render",function(n,t,o,a,i,d){return e.e({a:e.o(d.handleDateClick),b:e.o(d.handleTodayPlanClick),c:e.p({"show-top-section":!0,"greeting-text":i.customGreeting,"signed-dates":i.signedDates,weekstart:1,open:!0}),d:e.f(i.dayInfo,((n,t,o)=>({a:e.t(n.date),b:e.t(n.title),c:e.t(n.bz),d:n._id}))),e:!i.dayInfo.length},(i.dayInfo.length,{}))}]]);n.__runtimeHooks=6,wx.createPage(t);
