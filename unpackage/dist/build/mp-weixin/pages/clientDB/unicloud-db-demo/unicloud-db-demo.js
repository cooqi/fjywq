"use strict";const e=require("../../../common/vendor.js");var t;const o={components:{showCode:()=>"../../../components/show-code/show-code.js"},data:()=>({options:{a:"123"},collection:"order",fields:["book_id","create_date","quantity"],field:["book_id","create_date","quantity"],pageData:"replace",pageDataList:[{text:"add",value:"add"},{text:"replace",value:"replace"}],pageSize:2,orderbyArr:[],orderbyObj:{},orderby:"",getone:!1,pageCurrent:1,getcount:!0,L:"{",R:"}",dataList:[]}),mounted(){t=this.$refs.udb},onLoad(){setTimeout((()=>{this.dataList=this.$refs.udb.dataList}),2e3)},watch:{field(t,o){0===t.length&&e.index.showModal({title:"当前field为空",content:"即表示显示所有字段",showCancel:!1,confirmText:"知道了"})},pageData(e){"add"==e&&this.$nextTick((()=>{t.loadData({clear:!0})}))},getone(){t.loadData({clear:!0})}},methods:{changePageCurrent(e){e/1>0&&(this.pageCurrent=e)},async setOrderby({detail:{value:t}}){let o=Object.keys(this.orderbyObj);if(o.length>t.length)for(let e in this.orderbyObj)t.includes(e)||delete this.orderbyObj[e];else await new Promise((a=>{t.forEach((async t=>{if(!this.orderbyObj[t]){let n=["asc","desc"];e.index.showActionSheet({itemList:n,success:({tapIndex:e})=>{this.orderbyObj[t]=n[e]},fail:e=>{console.log(e),this.orderbyArr=o},complete(){a()}})}}))}));let a="";for(let e in this.orderbyObj)a+=e+" "+this.orderbyObj[e]+",";a=a.slice(0,a.length-1),console.log("orderby",a),this.orderby=a},mArrJson(e){let t=[];return e.forEach((e=>{t.push({text:e,value:e})})),t},async add(){await t.add({book_id:"add-test",quantity:Date.now()},{success:e=>(console.log("res.result: ",e.result),this.getFn(),e)})},remove(){const e=t.dataList[0]._id;t.remove(e)},update(){const e=t.dataList[0]._id;t.update(e,{book_id:"这条数据被改"},{success:e=>{this.getFn()}})},getFn(){t.loadData()},linkGetFn(){}}};if(!Array){(e.resolveComponent("showCode")+e.resolveComponent("unicloud-db")+e.resolveComponent("uni-data-checkbox")+e.resolveComponent("uni-number-box"))()}Math||((()=>"../../../node-modules/@dcloudio/uni-components/lib/unicloud-db/unicloud-db.js")+(()=>"../../../uni_modules/uni-data-checkbox/components/uni-data-checkbox/uni-data-checkbox.js")+(()=>"../../../uni_modules/uni-number-box/components/uni-number-box/uni-number-box.js"))();const a=e._export_sfc(o,[["render",function(t,o,a,n,r,d){return e.e({a:e.w((({data:t,loading:o,error:a,options:n,pagination:d,hasMore:i},s,l)=>e.e(r.getone?{}:{a:e.t(r.getcount?d.count:"未知"),b:e.t(t.length)},{c:o},o?{}:{d:"a4b4620c-1-"+l+",a4b4620c-0",e:e.p({codes:t})},{f:!i&&!o},{},{g:l,h:s})),{name:"d",path:"a",vueId:"a4b4620c-0"}),b:!r.getone,c:e.sr("udb","a4b4620c-0"),d:e.p({options:r.options,"page-data":r.pageData,collection:r.collection,field:r.field.join(","),"page-size":r.pageSize,orderby:r.orderby,getone:r.getone,"page-current":r.pageCurrent,getcount:r.getcount}),e:e.o(((...e)=>d.add&&d.add(...e))),f:e.o(((...e)=>d.remove&&d.remove(...e))),g:e.o(((...e)=>d.update&&d.update(...e))),h:e.o(((...e)=>d.getFn&&d.getFn(...e))),i:r.getone,j:e.o((e=>r.getone=e.detail.value)),k:!r.getone},r.getone?{}:e.e({l:e.o((e=>r.pageData=e)),m:e.p({localdata:r.pageDataList,modelValue:r.pageData}),n:"replace"==r.pageData},"replace"==r.pageData?{o:e.o((e=>d.changePageCurrent(e/1))),p:e.p({min:1,value:r.pageCurrent})}:{q:e.o((e=>t.$refs.udb.loadMore()))},{r:e.o((e=>e/1>0?r.pageSize=e/1:"")),s:e.p({min:1,value:r.pageSize}),t:e.o(d.setOrderby),v:e.o((e=>r.orderbyArr=e)),w:e.p({multiple:!0,localdata:d.mArrJson(r.fields),modelValue:r.orderbyArr}),x:e.t(r.orderby),y:r.getcount,z:e.o((e=>r.getcount=e.detail.value))}),{A:e.o((e=>r.field=e)),B:e.p({multiple:!0,localdata:d.mArrJson(r.fields),modelValue:r.field})})}],["__scopeId","data-v-a4b4620c"]]);wx.createPage(a);
