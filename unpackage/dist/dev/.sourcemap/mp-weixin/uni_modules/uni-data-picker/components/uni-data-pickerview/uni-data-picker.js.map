{"version":3,"file":"uni-data-picker.js","sources":["uni_modules/uni-data-picker/components/uni-data-pickerview/uni-data-picker.js"],"sourcesContent":["export default {\r\n  props: {\r\n    localdata: {\r\n      type: [Array, Object],\r\n      default () {\r\n        return []\r\n      }\r\n    },\r\n    spaceInfo: {\r\n      type: Object,\r\n      default () {\r\n        return {}\r\n      }\r\n    },\r\n    collection: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    action: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    field: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    orderby: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    where: {\r\n      type: [String, Object],\r\n      default: ''\r\n    },\r\n    pageData: {\r\n      type: String,\r\n      default: 'add'\r\n    },\r\n    pageCurrent: {\r\n      type: Number,\r\n      default: 1\r\n    },\r\n    pageSize: {\r\n      type: Number,\r\n      default: 20\r\n    },\r\n    getcount: {\r\n      type: [Boolean, String],\r\n      default: false\r\n    },\r\n    getone: {\r\n      type: [Boolean, String],\r\n      default: false\r\n    },\r\n    gettree: {\r\n      type: [Boolean, String],\r\n      default: false\r\n    },\r\n    manual: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    value: {\r\n      type: [Array, String, Number],\r\n      default () {\r\n        return []\r\n      }\r\n    },\r\n    modelValue: {\r\n      type: [Array, String, Number],\r\n      default () {\r\n        return []\r\n      }\r\n    },\r\n    preload: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    stepSearh: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    selfField: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    parentField: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    multiple: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    map: {\r\n      type: Object,\r\n      default() {\r\n        return {\r\n          text: \"text\",\r\n          value: \"value\"\r\n        }\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      errorMessage: '',\r\n      loadMore: {\r\n        contentdown: '',\r\n        contentrefresh: '',\r\n        contentnomore: ''\r\n      },\r\n      dataList: [],\r\n      selected: [],\r\n      selectedIndex: 0,\r\n      page: {\r\n        current: this.pageCurrent,\r\n        size: this.pageSize,\r\n        count: 0\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    isLocaldata() {\r\n      return !this.collection.length\r\n    },\r\n    postField() {\r\n      let fields = [this.field];\r\n      if (this.parentField) {\r\n        fields.push(`${this.parentField} as parent_value`);\r\n      }\r\n      return fields.join(',');\r\n    },\r\n    dataValue() {\r\n      let isModelValue = Array.isArray(this.modelValue) ? (this.modelValue.length > 0) : (this.modelValue !== null || this.modelValue !== undefined)\r\n      return isModelValue ? this.modelValue : this.value\r\n    },\r\n    hasValue() {\r\n      if (typeof this.dataValue === 'number') {\r\n        return true\r\n      }\r\n      return (this.dataValue != null) && (this.dataValue.length > 0)\r\n    }\r\n  },\r\n  created() {\r\n    this.$watch(() => {\r\n      var al = [];\r\n      ['pageCurrent',\r\n        'pageSize',\r\n        'spaceInfo',\r\n        'value',\r\n        'modelValue',\r\n        'localdata',\r\n        'collection',\r\n        'action',\r\n        'field',\r\n        'orderby',\r\n        'where',\r\n        'getont',\r\n        'getcount',\r\n        'gettree'\r\n      ].forEach(key => {\r\n        al.push(this[key])\r\n      });\r\n      return al\r\n    }, (newValue, oldValue) => {\r\n      let needReset = false\r\n      for (let i = 2; i < newValue.length; i++) {\r\n        if (newValue[i] != oldValue[i]) {\r\n          needReset = true\r\n          break\r\n        }\r\n      }\r\n      if (newValue[0] != oldValue[0]) {\r\n        this.page.current = this.pageCurrent\r\n      }\r\n      this.page.size = this.pageSize\r\n\r\n      this.onPropsChange()\r\n    })\r\n    this._treeData = []\r\n  },\r\n  methods: {\r\n    onPropsChange() {\r\n      this._treeData = []\r\n    },\r\n    getCommand(options = {}) {\r\n      /* eslint-disable no-undef */\r\n      let db = uniCloud.database(this.spaceInfo)\r\n\r\n      const action = options.action || this.action\r\n      if (action) {\r\n        db = db.action(action)\r\n      }\r\n\r\n      const collection = options.collection || this.collection\r\n      db = db.collection(collection)\r\n\r\n      const where = options.where || this.where\r\n      if (!(!where || !Object.keys(where).length)) {\r\n        db = db.where(where)\r\n      }\r\n\r\n      const field = options.field || this.field\r\n      if (field) {\r\n        db = db.field(field)\r\n      }\r\n\r\n      const orderby = options.orderby || this.orderby\r\n      if (orderby) {\r\n        db = db.orderBy(orderby)\r\n      }\r\n\r\n      const current = options.pageCurrent !== undefined ? options.pageCurrent : this.page.current\r\n      const size = options.pageSize !== undefined ? options.pageSize : this.page.size\r\n      const getCount = options.getcount !== undefined ? options.getcount : this.getcount\r\n      const getTree = options.gettree !== undefined ? options.gettree : this.gettree\r\n\r\n      const getOptions = {\r\n        getCount,\r\n        getTree\r\n      }\r\n      if (options.getTreePath) {\r\n        getOptions.getTreePath = options.getTreePath\r\n      }\r\n\r\n      db = db.skip(size * (current - 1)).limit(size).get(getOptions)\r\n\r\n      return db\r\n    },\r\n\t\tgetNodeData(callback) {\r\n\t\t  if (this.loading) {\r\n\t\t    return\r\n\t\t  }\r\n\t\t  this.loading = true\r\n\t\t  this.getCommand({\r\n\t\t    field: this.postField,\r\n\t\t\t\twhere: this._pathWhere()\r\n\t\t  }).then((res) => {\r\n\t\t    this.loading = false\r\n\t\t    this.selected = res.result.data\r\n\t\t    callback && callback()\r\n\t\t  }).catch((err) => {\r\n\t\t    this.loading = false\r\n\t\t    this.errorMessage = err\r\n\t\t  })\r\n\t\t},\r\n    getTreePath(callback) {\r\n      if (this.loading) {\r\n        return\r\n      }\r\n      this.loading = true\r\n\r\n      this.getCommand({\r\n        field: this.postField,\r\n        getTreePath: {\r\n          startWith: `${this.selfField}=='${this.dataValue}'`\r\n        }\r\n      }).then((res) => {\r\n        this.loading = false\r\n        let treePath = []\r\n        this._extractTreePath(res.result.data, treePath)\r\n        this.selected = treePath\r\n        callback && callback()\r\n      }).catch((err) => {\r\n        this.loading = false\r\n        this.errorMessage = err\r\n      })\r\n    },\r\n    loadData() {\r\n      if (this.isLocaldata) {\r\n        this._processLocalData()\r\n        return\r\n      }\r\n\r\n      if (this.dataValue != null) {\r\n        this._loadNodeData((data) => {\r\n          this._treeData = data\r\n          this._updateBindData()\r\n          this._updateSelected()\r\n        })\r\n        return\r\n      }\r\n\r\n      if (this.stepSearh) {\r\n        this._loadNodeData((data) => {\r\n          this._treeData = data\r\n          this._updateBindData()\r\n        })\r\n      } else {\r\n        this._loadAllData((data) => {\r\n          this._treeData = []\r\n          this._extractTree(data, this._treeData, null)\r\n          this._updateBindData()\r\n        })\r\n      }\r\n    },\r\n    _loadAllData(callback) {\r\n      if (this.loading) {\r\n        return\r\n      }\r\n      this.loading = true\r\n\r\n      this.getCommand({\r\n        field: this.postField,\r\n        gettree: true,\r\n        startwith: `${this.selfField}=='${this.dataValue}'`\r\n      }).then((res) => {\r\n        this.loading = false\r\n        callback(res.result.data)\r\n        this.onDataChange()\r\n      }).catch((err) => {\r\n        this.loading = false\r\n        this.errorMessage = err\r\n      })\r\n    },\r\n    _loadNodeData(callback, pw) {\r\n      if (this.loading) {\r\n        return\r\n      }\r\n      this.loading = true\r\n\r\n      this.getCommand({\r\n        field: this.postField,\r\n        where: pw || this._postWhere(),\r\n        pageSize: 500\r\n      }).then((res) => {\r\n        this.loading = false\r\n        callback(res.result.data)\r\n        this.onDataChange()\r\n      }).catch((err) => {\r\n        this.loading = false\r\n        this.errorMessage = err\r\n      })\r\n    },\r\n    _pathWhere() {\r\n      let result = []\r\n      let where_field = this._getParentNameByField();\r\n      if (where_field) {\r\n        result.push(`${where_field} == '${this.dataValue}'`)\r\n      }\r\n\r\n      if (this.where) {\r\n        return `(${this.where}) && (${result.join(' || ')})`\r\n      }\r\n\r\n      return result.join(' || ')\r\n    },\r\n    _postWhere() {\r\n      let result = []\r\n      let selected = this.selected\r\n      let parentField = this.parentField\r\n      if (parentField) {\r\n        result.push(`${parentField} == null || ${parentField} == \"\"`)\r\n      }\r\n      if (selected.length) {\r\n        for (var i = 0; i < selected.length - 1; i++) {\r\n          result.push(`${parentField} == '${selected[i].value}'`)\r\n        }\r\n      }\r\n\r\n      let where = []\r\n      if (this.where) {\r\n        where.push(`(${this.where})`)\r\n      }\r\n      if (result.length) {\r\n        where.push(`(${result.join(' || ')})`)\r\n      }\r\n\r\n      return where.join(' && ')\r\n    },\r\n    _nodeWhere() {\r\n      let result = []\r\n      let selected = this.selected\r\n      if (selected.length) {\r\n        result.push(`${this.parentField} == '${selected[selected.length - 1].value}'`)\r\n      }\r\n\r\n      if (this.where) {\r\n        return `(${this.where}) && (${result.join(' || ')})`\r\n      }\r\n\r\n      return result.join(' || ')\r\n    },\r\n    _getParentNameByField() {\r\n      const fields = this.field.split(',');\r\n      let where_field = null;\r\n      for (let i = 0; i < fields.length; i++) {\r\n        const items = fields[i].split('as');\r\n        if (items.length < 2) {\r\n          continue;\r\n        }\r\n        if (items[1].trim() === 'value') {\r\n          where_field = items[0].trim();\r\n          break;\r\n        }\r\n      }\r\n      return where_field\r\n    },\r\n    _isTreeView() {\r\n      return (this.parentField && this.selfField)\r\n    },\r\n    _updateSelected() {\r\n      var dl = this.dataList\r\n      var sl = this.selected\r\n      let textField = this.map.text\r\n      let valueField = this.map.value\r\n      for (var i = 0; i < sl.length; i++) {\r\n        var value = sl[i].value\r\n        var dl2 = dl[i]\r\n        for (var j = 0; j < dl2.length; j++) {\r\n          var item2 = dl2[j]\r\n          if (item2[valueField] === value) {\r\n            sl[i].text = item2[textField]\r\n            break\r\n          }\r\n        }\r\n      }\r\n    },\r\n    _updateBindData(node) {\r\n      const {\r\n        dataList,\r\n        hasNodes\r\n      } = this._filterData(this._treeData, this.selected)\r\n\r\n      let isleaf = this._stepSearh === false && !hasNodes\r\n\r\n      if (node) {\r\n        node.isleaf = isleaf\r\n      }\r\n\r\n      this.dataList = dataList\r\n      this.selectedIndex = dataList.length - 1\r\n\r\n      if (!isleaf && this.selected.length < dataList.length) {\r\n        this.selected.push({\r\n          value: null,\r\n          text: \"请选择\"\r\n        })\r\n      }\r\n\r\n      return {\r\n        isleaf,\r\n        hasNodes\r\n      }\r\n    },\r\n    _filterData(data, paths) {\r\n      let dataList = []\r\n      let hasNodes = true\r\n\r\n      dataList.push(data.filter((item) => {\r\n        return (item.parent_value === null || item.parent_value === undefined || item.parent_value === '')\r\n      }))\r\n      for (let i = 0; i < paths.length; i++) {\r\n        var value = paths[i].value\r\n        var nodes = data.filter((item) => {\r\n          return item.parent_value === value\r\n        })\r\n\r\n        if (nodes.length) {\r\n          dataList.push(nodes)\r\n        } else {\r\n          hasNodes = false\r\n        }\r\n      }\r\n\r\n      return {\r\n        dataList,\r\n        hasNodes\r\n      }\r\n    },\r\n    _extractTree(nodes, result, parent_value) {\r\n      let list = result || []\r\n      let valueField = this.map.value\r\n      for (let i = 0; i < nodes.length; i++) {\r\n        let node = nodes[i]\r\n\r\n        let child = {}\r\n        for (let key in node) {\r\n          if (key !== 'children') {\r\n            child[key] = node[key]\r\n          }\r\n        }\r\n        if (parent_value !== null && parent_value !== undefined && parent_value !== '') {\r\n          child.parent_value = parent_value\r\n        }\r\n        result.push(child)\r\n\r\n        let children = node.children\r\n        if (children) {\r\n          this._extractTree(children, result, node[valueField])\r\n        }\r\n      }\r\n    },\r\n    _extractTreePath(nodes, result) {\r\n      let list = result || []\r\n      for (let i = 0; i < nodes.length; i++) {\r\n        let node = nodes[i]\r\n\r\n        let child = {}\r\n        for (let key in node) {\r\n          if (key !== 'children') {\r\n            child[key] = node[key]\r\n          }\r\n        }\r\n        result.push(child)\r\n\r\n        let children = node.children\r\n        if (children) {\r\n          this._extractTreePath(children, result)\r\n        }\r\n      }\r\n    },\r\n    _findNodePath(key, nodes, path = []) {\r\n      let textField = this.map.text\r\n      let valueField = this.map.value\r\n      for (let i = 0; i < nodes.length; i++) {\r\n        let node = nodes[i]\r\n        let children = node.children\r\n        let text = node[textField]\r\n        let value = node[valueField]\r\n\r\n        path.push({\r\n          value,\r\n          text\r\n        })\r\n\r\n        if (value === key) {\r\n          return path\r\n        }\r\n\r\n        if (children) {\r\n          const p = this._findNodePath(key, children, path)\r\n          if (p.length) {\r\n            return p\r\n          }\r\n        }\r\n\r\n        path.pop()\r\n      }\r\n      return []\r\n    },\r\n    _processLocalData() {\r\n      this._treeData = []\r\n      this._extractTree(this.localdata, this._treeData)\r\n\r\n      var inputValue = this.dataValue\r\n      if (inputValue === undefined) {\r\n        return\r\n      }\r\n\r\n      if (Array.isArray(inputValue)) {\r\n        inputValue = inputValue[inputValue.length - 1]\r\n        if (typeof inputValue === 'object' && inputValue[this.map.value]) {\r\n          inputValue = inputValue[this.map.value]\r\n        }\r\n      }\r\n\r\n      this.selected = this._findNodePath(inputValue, this.localdata)\r\n    }\r\n  }\r\n}\r\n"],"names":["uniCloud"],"mappings":";;AAAA,MAAe,aAAA;AAAA,EACb,OAAO;AAAA,IACL,WAAW;AAAA,MACT,MAAM,CAAC,OAAO,MAAM;AAAA,MACpB,UAAW;AACT,eAAO,CAAE;AAAA,MACV;AAAA,IACF;AAAA,IACD,WAAW;AAAA,MACT,MAAM;AAAA,MACN,UAAW;AACT,eAAO,CAAE;AAAA,MACV;AAAA,IACF;AAAA,IACD,YAAY;AAAA,MACV,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,IACD,QAAQ;AAAA,MACN,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,IACD,OAAO;AAAA,MACL,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,IACD,SAAS;AAAA,MACP,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,IACD,OAAO;AAAA,MACL,MAAM,CAAC,QAAQ,MAAM;AAAA,MACrB,SAAS;AAAA,IACV;AAAA,IACD,UAAU;AAAA,MACR,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,IACD,aAAa;AAAA,MACX,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,IACD,UAAU;AAAA,MACR,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,IACD,UAAU;AAAA,MACR,MAAM,CAAC,SAAS,MAAM;AAAA,MACtB,SAAS;AAAA,IACV;AAAA,IACD,QAAQ;AAAA,MACN,MAAM,CAAC,SAAS,MAAM;AAAA,MACtB,SAAS;AAAA,IACV;AAAA,IACD,SAAS;AAAA,MACP,MAAM,CAAC,SAAS,MAAM;AAAA,MACtB,SAAS;AAAA,IACV;AAAA,IACD,QAAQ;AAAA,MACN,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,IACD,OAAO;AAAA,MACL,MAAM,CAAC,OAAO,QAAQ,MAAM;AAAA,MAC5B,UAAW;AACT,eAAO,CAAE;AAAA,MACV;AAAA,IACF;AAAA,IACD,YAAY;AAAA,MACV,MAAM,CAAC,OAAO,QAAQ,MAAM;AAAA,MAC5B,UAAW;AACT,eAAO,CAAE;AAAA,MACV;AAAA,IACF;AAAA,IACD,SAAS;AAAA,MACP,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,IACD,WAAW;AAAA,MACT,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,IACD,WAAW;AAAA,MACT,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,IACD,aAAa;AAAA,MACX,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,IACD,UAAU;AAAA,MACR,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,IACD,KAAK;AAAA,MACH,MAAM;AAAA,MACN,UAAU;AACR,eAAO;AAAA,UACL,MAAM;AAAA,UACN,OAAO;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAAA,EACF;AAAA,EACD,OAAO;AACL,WAAO;AAAA,MACL,SAAS;AAAA,MACT,cAAc;AAAA,MACd,UAAU;AAAA,QACR,aAAa;AAAA,QACb,gBAAgB;AAAA,QAChB,eAAe;AAAA,MAChB;AAAA,MACD,UAAU,CAAE;AAAA,MACZ,UAAU,CAAE;AAAA,MACZ,eAAe;AAAA,MACf,MAAM;AAAA,QACJ,SAAS,KAAK;AAAA,QACd,MAAM,KAAK;AAAA,QACX,OAAO;AAAA,MACR;AAAA,IACF;AAAA,EACF;AAAA,EACD,UAAU;AAAA,IACR,cAAc;AACZ,aAAO,CAAC,KAAK,WAAW;AAAA,IACzB;AAAA,IACD,YAAY;AACV,UAAI,SAAS,CAAC,KAAK,KAAK;AACxB,UAAI,KAAK,aAAa;AACpB,eAAO,KAAK,GAAG,KAAK,WAAW,kBAAkB;AAAA,MAClD;AACD,aAAO,OAAO,KAAK,GAAG;AAAA,IACvB;AAAA,IACD,YAAY;AACV,UAAI,eAAe,MAAM,QAAQ,KAAK,UAAU,IAAK,KAAK,WAAW,SAAS,IAAM,KAAK,eAAe,QAAQ,KAAK,eAAe;AACpI,aAAO,eAAe,KAAK,aAAa,KAAK;AAAA,IAC9C;AAAA,IACD,WAAW;AACT,UAAI,OAAO,KAAK,cAAc,UAAU;AACtC,eAAO;AAAA,MACR;AACD,aAAQ,KAAK,aAAa,QAAU,KAAK,UAAU,SAAS;AAAA,IAC7D;AAAA,EACF;AAAA,EACD,UAAU;AACR,SAAK,OAAO,MAAM;AAChB,UAAI,KAAK,CAAA;AACT;AAAA,QAAC;AAAA,QACC;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACR,EAAQ,QAAQ,SAAO;AACf,WAAG,KAAK,KAAK,GAAG,CAAC;AAAA,MACzB,CAAO;AACD,aAAO;AAAA,IACb,GAAO,CAAC,UAAU,aAAa;AAEzB,eAAS,IAAI,GAAG,IAAI,SAAS,QAAQ,KAAK;AACxC,YAAI,SAAS,CAAC,KAAK,SAAS,CAAC,GAAG;AAE9B;AAAA,QACD;AAAA,MACF;AACD,UAAI,SAAS,CAAC,KAAK,SAAS,CAAC,GAAG;AAC9B,aAAK,KAAK,UAAU,KAAK;AAAA,MAC1B;AACD,WAAK,KAAK,OAAO,KAAK;AAEtB,WAAK,cAAe;AAAA,IAC1B,CAAK;AACD,SAAK,YAAY,CAAE;AAAA,EACpB;AAAA,EACD,SAAS;AAAA,IACP,gBAAgB;AACd,WAAK,YAAY,CAAE;AAAA,IACpB;AAAA,IACD,WAAW,UAAU,IAAI;AAEvB,UAAI,KAAKA,cAAQ,GAAC,SAAS,KAAK,SAAS;AAEzC,YAAM,SAAS,QAAQ,UAAU,KAAK;AACtC,UAAI,QAAQ;AACV,aAAK,GAAG,OAAO,MAAM;AAAA,MACtB;AAED,YAAM,aAAa,QAAQ,cAAc,KAAK;AAC9C,WAAK,GAAG,WAAW,UAAU;AAE7B,YAAM,QAAQ,QAAQ,SAAS,KAAK;AACpC,UAAI,EAAE,CAAC,SAAS,CAAC,OAAO,KAAK,KAAK,EAAE,SAAS;AAC3C,aAAK,GAAG,MAAM,KAAK;AAAA,MACpB;AAED,YAAM,QAAQ,QAAQ,SAAS,KAAK;AACpC,UAAI,OAAO;AACT,aAAK,GAAG,MAAM,KAAK;AAAA,MACpB;AAED,YAAM,UAAU,QAAQ,WAAW,KAAK;AACxC,UAAI,SAAS;AACX,aAAK,GAAG,QAAQ,OAAO;AAAA,MACxB;AAED,YAAM,UAAU,QAAQ,gBAAgB,SAAY,QAAQ,cAAc,KAAK,KAAK;AACpF,YAAM,OAAO,QAAQ,aAAa,SAAY,QAAQ,WAAW,KAAK,KAAK;AAC3E,YAAM,WAAW,QAAQ,aAAa,SAAY,QAAQ,WAAW,KAAK;AAC1E,YAAM,UAAU,QAAQ,YAAY,SAAY,QAAQ,UAAU,KAAK;AAEvE,YAAM,aAAa;AAAA,QACjB;AAAA,QACA;AAAA,MACD;AACD,UAAI,QAAQ,aAAa;AACvB,mBAAW,cAAc,QAAQ;AAAA,MAClC;AAED,WAAK,GAAG,KAAK,QAAQ,UAAU,EAAE,EAAE,MAAM,IAAI,EAAE,IAAI,UAAU;AAE7D,aAAO;AAAA,IACR;AAAA,IACH,YAAY,UAAU;AACpB,UAAI,KAAK,SAAS;AAChB;AAAA,MACD;AACD,WAAK,UAAU;AACf,WAAK,WAAW;AAAA,QACd,OAAO,KAAK;AAAA,QACd,OAAO,KAAK,WAAY;AAAA,MAC5B,CAAK,EAAE,KAAK,CAAC,QAAQ;AACf,aAAK,UAAU;AACf,aAAK,WAAW,IAAI,OAAO;AAC3B,oBAAY,SAAU;AAAA,MAC5B,CAAK,EAAE,MAAM,CAAC,QAAQ;AAChB,aAAK,UAAU;AACf,aAAK,eAAe;AAAA,MAC1B,CAAK;AAAA,IACF;AAAA,IACC,YAAY,UAAU;AACpB,UAAI,KAAK,SAAS;AAChB;AAAA,MACD;AACD,WAAK,UAAU;AAEf,WAAK,WAAW;AAAA,QACd,OAAO,KAAK;AAAA,QACZ,aAAa;AAAA,UACX,WAAW,GAAG,KAAK,SAAS,MAAM,KAAK,SAAS;AAAA,QACjD;AAAA,MACT,CAAO,EAAE,KAAK,CAAC,QAAQ;AACf,aAAK,UAAU;AACf,YAAI,WAAW,CAAE;AACjB,aAAK,iBAAiB,IAAI,OAAO,MAAM,QAAQ;AAC/C,aAAK,WAAW;AAChB,oBAAY,SAAU;AAAA,MAC9B,CAAO,EAAE,MAAM,CAAC,QAAQ;AAChB,aAAK,UAAU;AACf,aAAK,eAAe;AAAA,MAC5B,CAAO;AAAA,IACF;AAAA,IACD,WAAW;AACT,UAAI,KAAK,aAAa;AACpB,aAAK,kBAAmB;AACxB;AAAA,MACD;AAED,UAAI,KAAK,aAAa,MAAM;AAC1B,aAAK,cAAc,CAAC,SAAS;AAC3B,eAAK,YAAY;AACjB,eAAK,gBAAiB;AACtB,eAAK,gBAAiB;AAAA,QAChC,CAAS;AACD;AAAA,MACD;AAED,UAAI,KAAK,WAAW;AAClB,aAAK,cAAc,CAAC,SAAS;AAC3B,eAAK,YAAY;AACjB,eAAK,gBAAiB;AAAA,QAChC,CAAS;AAAA,MACT,OAAa;AACL,aAAK,aAAa,CAAC,SAAS;AAC1B,eAAK,YAAY,CAAE;AACnB,eAAK,aAAa,MAAM,KAAK,WAAW,IAAI;AAC5C,eAAK,gBAAiB;AAAA,QAChC,CAAS;AAAA,MACF;AAAA,IACF;AAAA,IACD,aAAa,UAAU;AACrB,UAAI,KAAK,SAAS;AAChB;AAAA,MACD;AACD,WAAK,UAAU;AAEf,WAAK,WAAW;AAAA,QACd,OAAO,KAAK;AAAA,QACZ,SAAS;AAAA,QACT,WAAW,GAAG,KAAK,SAAS,MAAM,KAAK,SAAS;AAAA,MACxD,CAAO,EAAE,KAAK,CAAC,QAAQ;AACf,aAAK,UAAU;AACf,iBAAS,IAAI,OAAO,IAAI;AACxB,aAAK,aAAc;AAAA,MAC3B,CAAO,EAAE,MAAM,CAAC,QAAQ;AAChB,aAAK,UAAU;AACf,aAAK,eAAe;AAAA,MAC5B,CAAO;AAAA,IACF;AAAA,IACD,cAAc,UAAU,IAAI;AAC1B,UAAI,KAAK,SAAS;AAChB;AAAA,MACD;AACD,WAAK,UAAU;AAEf,WAAK,WAAW;AAAA,QACd,OAAO,KAAK;AAAA,QACZ,OAAO,MAAM,KAAK,WAAY;AAAA,QAC9B,UAAU;AAAA,MAClB,CAAO,EAAE,KAAK,CAAC,QAAQ;AACf,aAAK,UAAU;AACf,iBAAS,IAAI,OAAO,IAAI;AACxB,aAAK,aAAc;AAAA,MAC3B,CAAO,EAAE,MAAM,CAAC,QAAQ;AAChB,aAAK,UAAU;AACf,aAAK,eAAe;AAAA,MAC5B,CAAO;AAAA,IACF;AAAA,IACD,aAAa;AACX,UAAI,SAAS,CAAE;AACf,UAAI,cAAc,KAAK;AACvB,UAAI,aAAa;AACf,eAAO,KAAK,GAAG,WAAW,QAAQ,KAAK,SAAS,GAAG;AAAA,MACpD;AAED,UAAI,KAAK,OAAO;AACd,eAAO,IAAI,KAAK,KAAK,SAAS,OAAO,KAAK,MAAM,CAAC;AAAA,MAClD;AAED,aAAO,OAAO,KAAK,MAAM;AAAA,IAC1B;AAAA,IACD,aAAa;AACX,UAAI,SAAS,CAAE;AACf,UAAI,WAAW,KAAK;AACpB,UAAI,cAAc,KAAK;AACvB,UAAI,aAAa;AACf,eAAO,KAAK,GAAG,WAAW,eAAe,WAAW,QAAQ;AAAA,MAC7D;AACD,UAAI,SAAS,QAAQ;AACnB,iBAAS,IAAI,GAAG,IAAI,SAAS,SAAS,GAAG,KAAK;AAC5C,iBAAO,KAAK,GAAG,WAAW,QAAQ,SAAS,CAAC,EAAE,KAAK,GAAG;AAAA,QACvD;AAAA,MACF;AAED,UAAI,QAAQ,CAAE;AACd,UAAI,KAAK,OAAO;AACd,cAAM,KAAK,IAAI,KAAK,KAAK,GAAG;AAAA,MAC7B;AACD,UAAI,OAAO,QAAQ;AACjB,cAAM,KAAK,IAAI,OAAO,KAAK,MAAM,CAAC,GAAG;AAAA,MACtC;AAED,aAAO,MAAM,KAAK,MAAM;AAAA,IACzB;AAAA,IACD,aAAa;AACX,UAAI,SAAS,CAAE;AACf,UAAI,WAAW,KAAK;AACpB,UAAI,SAAS,QAAQ;AACnB,eAAO,KAAK,GAAG,KAAK,WAAW,QAAQ,SAAS,SAAS,SAAS,CAAC,EAAE,KAAK,GAAG;AAAA,MAC9E;AAED,UAAI,KAAK,OAAO;AACd,eAAO,IAAI,KAAK,KAAK,SAAS,OAAO,KAAK,MAAM,CAAC;AAAA,MAClD;AAED,aAAO,OAAO,KAAK,MAAM;AAAA,IAC1B;AAAA,IACD,wBAAwB;AACtB,YAAM,SAAS,KAAK,MAAM,MAAM,GAAG;AACnC,UAAI,cAAc;AAClB,eAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACtC,cAAM,QAAQ,OAAO,CAAC,EAAE,MAAM,IAAI;AAClC,YAAI,MAAM,SAAS,GAAG;AACpB;AAAA,QACD;AACD,YAAI,MAAM,CAAC,EAAE,KAAI,MAAO,SAAS;AAC/B,wBAAc,MAAM,CAAC,EAAE,KAAI;AAC3B;AAAA,QACD;AAAA,MACF;AACD,aAAO;AAAA,IACR;AAAA,IACD,cAAc;AACZ,aAAQ,KAAK,eAAe,KAAK;AAAA,IAClC;AAAA,IACD,kBAAkB;AAChB,UAAI,KAAK,KAAK;AACd,UAAI,KAAK,KAAK;AACd,UAAI,YAAY,KAAK,IAAI;AACzB,UAAI,aAAa,KAAK,IAAI;AAC1B,eAAS,IAAI,GAAG,IAAI,GAAG,QAAQ,KAAK;AAClC,YAAI,QAAQ,GAAG,CAAC,EAAE;AAClB,YAAI,MAAM,GAAG,CAAC;AACd,iBAAS,IAAI,GAAG,IAAI,IAAI,QAAQ,KAAK;AACnC,cAAI,QAAQ,IAAI,CAAC;AACjB,cAAI,MAAM,UAAU,MAAM,OAAO;AAC/B,eAAG,CAAC,EAAE,OAAO,MAAM,SAAS;AAC5B;AAAA,UACD;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAAA,IACD,gBAAgB,MAAM;AACpB,YAAM;AAAA,QACJ;AAAA,QACA;AAAA,MACR,IAAU,KAAK,YAAY,KAAK,WAAW,KAAK,QAAQ;AAElD,UAAI,SAAS,KAAK,eAAe,SAAS,CAAC;AAE3C,UAAI,MAAM;AACR,aAAK,SAAS;AAAA,MACf;AAED,WAAK,WAAW;AAChB,WAAK,gBAAgB,SAAS,SAAS;AAEvC,UAAI,CAAC,UAAU,KAAK,SAAS,SAAS,SAAS,QAAQ;AACrD,aAAK,SAAS,KAAK;AAAA,UACjB,OAAO;AAAA,UACP,MAAM;AAAA,QAChB,CAAS;AAAA,MACF;AAED,aAAO;AAAA,QACL;AAAA,QACA;AAAA,MACD;AAAA,IACF;AAAA,IACD,YAAY,MAAM,OAAO;AACvB,UAAI,WAAW,CAAE;AACjB,UAAI,WAAW;AAEf,eAAS,KAAK,KAAK,OAAO,CAAC,SAAS;AAClC,eAAQ,KAAK,iBAAiB,QAAQ,KAAK,iBAAiB,UAAa,KAAK,iBAAiB;AAAA,MACvG,CAAO,CAAC;AACF,eAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACrC,YAAI,QAAQ,MAAM,CAAC,EAAE;AACrB,YAAI,QAAQ,KAAK,OAAO,CAAC,SAAS;AAChC,iBAAO,KAAK,iBAAiB;AAAA,QACvC,CAAS;AAED,YAAI,MAAM,QAAQ;AAChB,mBAAS,KAAK,KAAK;AAAA,QAC7B,OAAe;AACL,qBAAW;AAAA,QACZ;AAAA,MACF;AAED,aAAO;AAAA,QACL;AAAA,QACA;AAAA,MACD;AAAA,IACF;AAAA,IACD,aAAa,OAAO,QAAQ,cAAc;AAExC,UAAI,aAAa,KAAK,IAAI;AAC1B,eAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACrC,YAAI,OAAO,MAAM,CAAC;AAElB,YAAI,QAAQ,CAAE;AACd,iBAAS,OAAO,MAAM;AACpB,cAAI,QAAQ,YAAY;AACtB,kBAAM,GAAG,IAAI,KAAK,GAAG;AAAA,UACtB;AAAA,QACF;AACD,YAAI,iBAAiB,QAAQ,iBAAiB,UAAa,iBAAiB,IAAI;AAC9E,gBAAM,eAAe;AAAA,QACtB;AACD,eAAO,KAAK,KAAK;AAEjB,YAAI,WAAW,KAAK;AACpB,YAAI,UAAU;AACZ,eAAK,aAAa,UAAU,QAAQ,KAAK,UAAU,CAAC;AAAA,QACrD;AAAA,MACF;AAAA,IACF;AAAA,IACD,iBAAiB,OAAO,QAAQ;AAE9B,eAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACrC,YAAI,OAAO,MAAM,CAAC;AAElB,YAAI,QAAQ,CAAE;AACd,iBAAS,OAAO,MAAM;AACpB,cAAI,QAAQ,YAAY;AACtB,kBAAM,GAAG,IAAI,KAAK,GAAG;AAAA,UACtB;AAAA,QACF;AACD,eAAO,KAAK,KAAK;AAEjB,YAAI,WAAW,KAAK;AACpB,YAAI,UAAU;AACZ,eAAK,iBAAiB,UAAU,MAAM;AAAA,QACvC;AAAA,MACF;AAAA,IACF;AAAA,IACD,cAAc,KAAK,OAAO,OAAO,CAAA,GAAI;AACnC,UAAI,YAAY,KAAK,IAAI;AACzB,UAAI,aAAa,KAAK,IAAI;AAC1B,eAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACrC,YAAI,OAAO,MAAM,CAAC;AAClB,YAAI,WAAW,KAAK;AACpB,YAAI,OAAO,KAAK,SAAS;AACzB,YAAI,QAAQ,KAAK,UAAU;AAE3B,aAAK,KAAK;AAAA,UACR;AAAA,UACA;AAAA,QACV,CAAS;AAED,YAAI,UAAU,KAAK;AACjB,iBAAO;AAAA,QACR;AAED,YAAI,UAAU;AACZ,gBAAM,IAAI,KAAK,cAAc,KAAK,UAAU,IAAI;AAChD,cAAI,EAAE,QAAQ;AACZ,mBAAO;AAAA,UACR;AAAA,QACF;AAED,aAAK,IAAK;AAAA,MACX;AACD,aAAO,CAAE;AAAA,IACV;AAAA,IACD,oBAAoB;AAClB,WAAK,YAAY,CAAE;AACnB,WAAK,aAAa,KAAK,WAAW,KAAK,SAAS;AAEhD,UAAI,aAAa,KAAK;AACtB,UAAI,eAAe,QAAW;AAC5B;AAAA,MACD;AAED,UAAI,MAAM,QAAQ,UAAU,GAAG;AAC7B,qBAAa,WAAW,WAAW,SAAS,CAAC;AAC7C,YAAI,OAAO,eAAe,YAAY,WAAW,KAAK,IAAI,KAAK,GAAG;AAChE,uBAAa,WAAW,KAAK,IAAI,KAAK;AAAA,QACvC;AAAA,MACF;AAED,WAAK,WAAW,KAAK,cAAc,YAAY,KAAK,SAAS;AAAA,IAC9D;AAAA,EACF;AACH;;"}