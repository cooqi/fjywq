{"version":3,"file":"detail.js","sources":["uni_modules/uni-upgrade-center/pages/version/detail.vue","D:/ruanjian/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli-vite/uniPage:/dW5pX21vZHVsZXMvdW5pLXVwZ3JhZGUtY2VudGVyL3BhZ2VzL3ZlcnNpb24vZGV0YWlsLnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"uni-container\">\r\n\t\t<view class=\"uni-header\">\r\n\t\t\t<view class=\"uni-group\">\r\n\t\t\t\t<view class=\"uni-title\">包类型</view>\r\n\t\t\t\t<view class=\"uni-sub-title\" style=\"display: flex;justify-content: center;align-items: center;\">\r\n\t\t\t\t\t{{type_valuetotext[formData.type]}}\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view v-if=\"!isStable\" class=\"uni-group\">\r\n\t\t\t\t<button class=\"uni-button\" type=\"warn\" size=\"mini\" @click=\"deletePackage\">删除</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<uni-forms ref=\"form\" :value=\"formData\" validateTrigger=\"bind\" :labelWidth=\"labelWidth\">\r\n\t\t\t<uni-forms-item name=\"appid\" label=\"AppID\" required>\r\n\t\t\t\t<uni-easyinput :disabled=\"true\" v-model=\"formData.appid\" trim=\"both\" />\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<uni-forms-item name=\"name\" label=\"应用名称\">\r\n\t\t\t\t<uni-easyinput :disabled=\"true\" v-model=\"formData.name\" trim=\"both\" />\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<uni-forms-item name=\"title\" label=\"更新标题\">\r\n\t\t\t\t<uni-easyinput :disabled=\"detailsState\" placeholder=\"更新标题\" v-model=\"formData.title\" />\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<uni-forms-item name=\"contents\" label=\"更新内容\" required>\r\n\t\t\t\t<textarea auto-height style=\"box-sizing: content-box;\" :disabled=\"detailsState\"\r\n\t\t\t\t\t@input=\"binddata('contents', $event.detail.value)\" class=\"uni-textarea-border\"\r\n\t\t\t\t\t:value=\"formData.contents\" @update:value=\"val => formData.contents = val\"></textarea>\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<uni-forms-item name=\"platform\" label=\"平台\" required>\r\n\t\t\t\t<uni-data-checkbox :disabled=\"true\" :multiple=\"true\" v-model=\"formData.platform\"\r\n\t\t\t\t\t:localdata=\"platformLocaldata\" />\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<uni-forms-item name=\"version\" label=\"版本号\" required>\r\n\t\t\t\t<uni-easyinput :disabled=\"true\" v-model=\"formData.version\" placeholder=\"当前包版本号，必须大于当前已上线版本号\" />\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<uni-forms-item v-if=\"isWGT\" name=\"min_uni_version\" label=\"原生App最低版本\" :required=\"isWGT\">\r\n\t\t\t\t<uni-easyinput :disabled=\"detailsState\" placeholder=\"原生App最低版本\" v-model=\"formData.min_uni_version\" />\r\n\t\t\t\t<show-info :content=\"minUniVersionContent\"></show-info>\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<uni-forms-item v-if=\"!isiOS && !detailsState\" label=\"上传apk包\">\r\n\t\t\t\t<uni-file-picker v-model=\"appFileList\" :file-extname=\"fileExtname\" :disabled=\"hasPackage\"\r\n\t\t\t\t\treturnType=\"object\" file-mediatype=\"all\" limit=\"1\" @success=\"packageUploadSuccess\"\r\n\t\t\t\t\t@delete=\"packageDelete\">\r\n\t\t\t\t\t<button type=\"primary\" size=\"mini\" @click=\"selectFile\">选择文件</button>\r\n\t\t\t\t</uni-file-picker>\r\n\t\t\t\t<text v-if=\"hasPackage\"\r\n\t\t\t\t\tstyle=\"padding-left: 20px;color: #a8a8a8;\">{{Number(appFileList.size / 1024 / 1024).toFixed(2)}}M</text>\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<uni-forms-item name=\"url\" :label=\"isiOS ? 'AppStore' : '下载链接'\" required>\r\n\t\t\t\t<uni-easyinput :disabled=\"detailsState\" placeholder=\"下载链接\" v-model=\"formData.url\" :maxlength=\"-1\" />\r\n\t\t\t\t<!-- <show-info :top=\"-80\" :content=\"uploadFileContent\"></show-info> -->\r\n\t\t\t</uni-forms-item>\r\n\r\n\t\t\t<uni-forms-item v-if=\"isWGT\" name=\"is_silently\" label=\"静默更新\">\r\n\t\t\t\t<switch :disabled=\"detailsState\"\r\n\t\t\t\t\t@change=\"binddata('is_silently', $event.detail.value),formData.is_silently=$event.detail.value\"\r\n\t\t\t\t\t:checked=\"formData.is_silently\" />\r\n\t\t\t\t<show-info :top=\"-80\" :content=\"silentlyContent\"></show-info>\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<uni-forms-item v-if=\"!isiOS\" name=\"is_mandatory\" label=\"强制更新\">\r\n\t\t\t\t<switch :disabled=\"detailsState\"\r\n\t\t\t\t\t@change=\"binddata('is_mandatory', $event.detail.value),formData.is_mandatory=$event.detail.value\"\r\n\t\t\t\t\t:checked=\"formData.is_mandatory\" />\r\n\t\t\t\t<show-info width=\"230\" :top=\"-30\" :content=\"mandatoryContent\"></show-info>\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<uni-forms-item name=\"stable_publish\" label=\"上线发行\">\r\n\t\t\t\t<switch :disabled=\"detailsState || isStable\"\r\n\t\t\t\t\t@change=\"binddata('stable_publish', $event.detail.value),formData.stable_publish=$event.detail.value\"\r\n\t\t\t\t\t:checked=\"formData.stable_publish\" />\r\n\t\t\t\t<show-info v-if=\"isStable\" :top=\"-50\" width=\"350\" :content=\"stablePublishContent\"></show-info>\r\n\t\t\t\t<show-info v-else :top=\"-40\" :content=\"stablePublishContent2\"></show-info>\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<uni-forms-item name=\"create_date\" label=\"上传时间\">\r\n\t\t\t\t<uni-dateformat format=\"yyyy-MM-dd hh:mm:ss\" :date=\"formData.create_date\" :threshold=\"[0, 0]\" />\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<uni-forms-item v-show=\"false\" name=\"type\" label=\"安装包类型\">\r\n\t\t\t\t<uni-data-checkbox v-model=\"formData.type\" :localdata=\"formOptions.type_localdata\" />\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<view class=\"uni-button-group\">\r\n\t\t\t\t<button type=\"primary\" class=\"uni-button\" style=\"width: 100px;\" @click=\"detailsState = false\"\r\n\t\t\t\t\tv-if=\"detailsState\">修改</button>\r\n\t\t\t\t<button type=\"primary\" class=\"uni-button\" style=\"width: 100px;\" @click=\"submit\"\r\n\t\t\t\t\tv-if=\"!detailsState\">提交</button>\r\n\t\t\t\t<button type=\"warn\" class=\"uni-button\" style=\"width: 100px;\" @click=\"cancelEdit\"\r\n\t\t\t\t\tv-if=\"!detailsState\">取消</button>\r\n\t\t\t\t<navigator open-type=\"navigateBack\" style=\"margin-left: 15px;\">\r\n\t\t\t\t\t<button class=\"uni-button\" style=\"width: 100px;\">返回</button>\r\n\t\t\t\t</navigator>\r\n\t\t\t</view>\r\n\t\t</uni-forms>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tvalidator,\r\n\t\tenumConverter\r\n\t} from '@/uni_modules/uni-upgrade-center/js_sdk/validator/opendb-app-versions.js';\r\n\timport addAndDetail, {\r\n\t\tfields\r\n\t} from '../mixin/version_add_detail_mixin.js'\r\n\timport {\r\n\t\tdeepClone,\r\n\t\tappVersionListDbName\r\n\t} from '../utils.js'\r\n\timport showInfo from '../components/show-info.vue'\r\n\r\n\tconst db = uniCloud.database();\r\n\tconst dbCmd = db.command;\r\n\tconst dbCollectionName = appVersionListDbName;\r\n\r\n\tconst platform_iOS = 'iOS';\r\n\tconst platform_Android = 'Android';\r\n\r\n\tfunction getValidator(fields) {\r\n\t\tlet reuslt = {}\r\n\t\tfor (let key in validator) {\r\n\t\t\tif (fields.includes(key)) {\r\n\t\t\t\treuslt[key] = validator[key]\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn reuslt\r\n\t}\r\n\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tshowInfo\r\n\t\t},\r\n\t\tmixins: [addAndDetail],\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tshowStableInfo: false,\r\n\t\t\t\tisStable: true, // 是否是线上发行版\r\n\t\t\t\toriginalData: {}, // 原始数据，用于恢复状态\r\n\t\t\t\tdetailsState: true // 查看状态\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync onLoad(e) {\r\n\t\t\tconst id = e.id\r\n\t\t\tthis.formDataId = id\r\n\t\t\tawait this.getDetail(id)\r\n\t\t\tthis.isStable = this.formData.stable_publish;\r\n\t\t\tthis.latestStableData = await this.getLatestVersion();\r\n\t\t\tif (this.isWGT) {\r\n\t\t\t\tthis.rules.min_uni_version.rules.push({\r\n\t\t\t\t\t\"required\": true\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t/**\r\n\t\t\t * 触发表单提交\r\n\t\t\t */\r\n\t\t\tsubmit() {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\tmask: true\r\n\t\t\t\t})\r\n\t\t\t\tthis.$refs.form.validate().then((res) => {\r\n\t\t\t\t\tres.store_list = this.formData.store_list\r\n\t\t\t\t\tif (res.store_list) {\r\n\t\t\t\t\t\tres.store_list.forEach(item => {\r\n\t\t\t\t\t\t\titem.priority = parseFloat(item.priority)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.submitForm(res)\r\n\t\t\t\t}).catch((errors) => {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tasync submitForm(value) {\r\n\t\t\t\tconst collectionDB = db.collection(dbCollectionName)\r\n\t\t\t\t// 使用 clientDB 提交数据\r\n\t\t\t\tcollectionDB.doc(this.formDataId).update(value).then(async (res) => {\r\n\t\t\t\t\t// 如果不是线上发行版，则在设置为上线发行时，需将之前的已上线版设为下线\r\n\t\t\t\t\tif (!this.isStable && value.stable_publish === true && this.latestStableData) {\r\n\t\t\t\t\t\tawait collectionDB.doc(this.latestStableData._id).update({\r\n\t\t\t\t\t\t\tstable_publish: false\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '修改成功'\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\tthis.getOpenerEventChannel().emit('refreshData')\r\n\t\t\t\t\tsetTimeout(() => uni.navigateBack(), 500)\r\n\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\tcontent: err.message || '请求服务失败',\r\n\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t})\r\n\t\t\t\t}).finally(() => {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 获取表单数据\r\n\t\t\t * @param {Object} id\r\n\t\t\t */\r\n\t\t\tgetDetail(id) {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\tmask: true\r\n\t\t\t\t})\r\n\t\t\t\treturn db.collection(dbCollectionName)\r\n\t\t\t\t\t.doc(id)\r\n\t\t\t\t\t.field(fields)\r\n\t\t\t\t\t.get()\r\n\t\t\t\t\t.then((res) => {\r\n\t\t\t\t\t\tconst data = res.result.data[0]\r\n\t\t\t\t\t\tif (data) {\r\n\t\t\t\t\t\t\tthis.formData = data\r\n\t\t\t\t\t\t\tthis.originalData = deepClone(this.formData)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\tcontent: err.message || '请求服务失败',\r\n\t\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}).finally(() => {\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tdeletePackage() {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\tcontent: '是否删除该版本',\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tdb.collection(dbCollectionName).doc(this.formDataId).remove()\r\n\t\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: '删除成功'\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\tthis.getOpenerEventChannel().emit('refreshData')\r\n\t\t\t\t\t\t\t\t\tsetTimeout(() => uni.navigateBack(), 500)\r\n\t\t\t\t\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\t\tcontent: err.message || '请求服务失败',\r\n\t\t\t\t\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}).finally(() => {\r\n\t\t\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tasync getLatestVersion() {\r\n\t\t\t\tconst where = {\r\n\t\t\t\t\tappid: this.formData.appid,\r\n\t\t\t\t\ttype: this.formData.type,\r\n\t\t\t\t\tstable_publish: true\r\n\t\t\t\t};\r\n\t\t\t\tif (!this.isWGT) {\r\n\t\t\t\t\twhere.platform = this.formData.platform[0]\r\n\t\t\t\t}\r\n\t\t\t\tconst latestStableData = await db.collection(dbCollectionName).where(where).get()\r\n\t\t\t\treturn latestStableData.result.data.find(item => item.platform.toString() === this.formData.platform\r\n\t\t\t\t\t.toString());\r\n\t\t\t},\r\n\t\t\tcancelEdit() {\r\n\t\t\t\tlet content = '';\r\n\t\t\t\t!this.isiOS && this.hasPackage ? content += '\\n将会删除已上传的包' : '';\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '取消修改',\r\n\t\t\t\t\tcontent,\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\tthis.formData = deepClone(this.originalData)\r\n\t\t\t\t\t\t\tthis.detailsState = true\r\n\r\n\t\t\t\t\t\t\tif (this.hasPackage) {\r\n\t\t\t\t\t\t\t\tlet fileList = [];\r\n\t\t\t\t\t\t\t\tfileList.push(this.appFileList.url)\r\n\t\t\t\t\t\t\t\tthis.$request('deleteFile', {\r\n\t\t\t\t\t\t\t\t\tfileList\r\n\t\t\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\t\t\tfunctionName: 'upgrade-center'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n<style lang=\"scss\">\r\n\t.show-stable-info {\r\n\t\tposition: absolute;\r\n\t\tleft: 165px;\r\n\t\tpadding: 5px 10px;\r\n\t\tbackground-color: #f4f4f5;\r\n\t\tcolor: #909399;\r\n\t\tborder-radius: 4px;\r\n\t\tborder: 1px solid #e9e9eb;\r\n\t}\r\n\r\n\t::v-deep .uni-forms-item__content {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.uni-button-group {\r\n\t\t& button {\r\n\t\t\tmargin-left: 15px;\r\n\t\t}\r\n\r\n\t\t& button:first-child {\r\n\t\t\tmargin-left: 0px;\r\n\t\t}\r\n\t}\r\n</style>\r\n","import MiniProgramPage from 'E:/web/cooqi/fjywq/uni_modules/uni-upgrade-center/pages/version/detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["uniCloud","appVersionListDbName","addAndDetail","uni","fields","deepClone"],"mappings":"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"}