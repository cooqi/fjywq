{"version":3,"file":"notice.js","sources":["pages/edit/notice.vue","D:/ruanjian/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvZWRpdC9ub3RpY2UudnVl"],"sourcesContent":["<template>\n\t<view>\n\t\t\r\n\t\t<view class=\"search-box\">\r\n\t\t\t<input class=\"uni-input\" name=\"title\" v-model=\"search.title\" placeholder=\"请输入标题\" @blur=\"getList\" />\r\n\t\t</view>\r\n\t\t<view class=\"list\">\r\n\t\t\t<view class=\"list-item\" v-for=\"(item,i) in list\" :key=\"i\" @click=\"editInfo(item)\">\r\n\t\t\t\t{{item.title}}\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t <view class=\"page\">\r\n\t\t      <form>\r\n\t\t\t\t  <view class=\"uni-form-item\">\r\n\t\t\t\t    <text class=\"title\">标题</text>\r\n\t\t\t\t    <input class=\"uni-input\" name=\"title\" v-model=\"formData.title\" placeholder=\"请输入\"  />\r\n\t\t\t\t  </view>\r\n\t\t\t\t  <view class=\"uni-form-item \">\r\n\t\t\t\t\t<text class=\"title\">内容</text>\r\n\t\t\t\t\t<textarea class=\"uni-input\" name=\"content\" v-model=\"formData.content\" placeholder=\"请输入\"  />\r\n\t\t\t\t  </view>\r\n\t\t\t\t<view class=\"uni-form-item \">\r\n\t\t\t\t\t<text class=\"title\">置顶</text>\r\n\t\t\t\t\t<input class=\"uni-input\" name=\"top\" v-model=\"formData.top\" placeholder=\"请输入\"  />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"uni-form-item \">\r\n\t\t\t\t\t<text class=\"title\">是否隐藏</text>\r\n\t\t\t\t\t<uni-data-select\r\n\t\t\t\t\t      v-model=\"formData.hide\"\r\n\t\t\t\t\t      :localdata=\"sf\"\r\n\t\t\t\t\t    ></uni-data-select>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"uni-form-item \">\r\n\t\t\t\t\t<text class=\"title\">是否今日关注</text>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<uni-data-select\r\n\t\t\t\t\t      v-model=\"formData.is_today_important\"\r\n\t\t\t\t\t      :localdata=\"sf\"\r\n\t\t\t\t\t    ></uni-data-select>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"uni-form-item \">\r\n\t\t\t\t\t<text class=\"title\">分类</text>\r\n\t\t\t\t\t<uni-data-select\r\n\t\t\t\t\t      v-model=\"formData.classType\"\r\n\t\t\t\t\t      :localdata=\"range2\"\r\n\t\t\t\t\t    ></uni-data-select>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"uni-form-item \">\r\n\t\t\t\t\t<text class=\"title\">类型</text>\r\n\t\t\t\t\t<uni-data-select\r\n\t\t\t\t\t      v-model=\"formData.type\"\r\n\t\t\t\t\t      :localdata=\"range\"\r\n\t\t\t\t\t    ></uni-data-select>\r\n\t\t\t\t\t\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"uni-form-item \">\r\n\t\t\t\t\t<text class=\"title\">图片</text>\r\n\t\t\t\t\t<textarea class=\"uni-input\" name=\"imgs\" v-model=\"formData.imgs\" placeholder=\"请输入\"  />\r\n\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"uni-form-item\">\r\n\t\t\t\t\t  <text class=\"title\">备注</text>\r\n\t\t\t\t\t  <textarea name=\"bz\" v-model=\"formData.bz\" placeholder=\"请输入备注\" style=\"background: #FFF;\" />\r\n\t\t\t\t\t\r\n\t\t\t\t\t</view>\r\n\t\t        \r\n\t\t        \r\n\t\t       \r\n\t\t        <view class=\"flex-row\">\r\n\t\t          <button type=\"primary\" class=\"uni-button\" @click=\"submit('update')\" v-if=\"formData._id\">更新</button>\r\n\t\t          <button type=\"primary\" class=\"uni-button\" @click=\"remove(formData._id)\" v-if=\"formData._id\">删除</button>\r\n\t\t          <button type=\"primary\" class=\"uni-button\" @click=\"submit('add')\" v-else>保存</button>\r\n\t\t        </view>\r\n\t\t      </form>\r\n\r\n\t\t </view>\n\t</view>\n</template>\n\n<script>\n\texport default{\r\n\t\tdata(){\r\n\t\t\treturn{\r\n\t\t\t\tlist:[],\r\n\t\t\t\tformData:{\r\n\t\t\t\t\ttitle:'',\r\n\t\t\t\t\tbz:'',\r\n\t\t\t\t\ttop:'',\r\n\t\t\t\t\ttype:'',\r\n\t\t\t\t\tcontent:'',\r\n\t\t\t\t\thide:'',\r\n\t\t\t\t\tis_today_important:'',\r\n\t\t\t\t\tclassType:'',\r\n\t\t\t\t\timgs:''\r\n\t\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\tsearch:{\r\n\t\t\t\t\ttitle:''\r\n\t\t\t\t},\r\n\t\t\t\tid:'',\r\n\t\t\t\t range: [\r\n\t\t\t\t\t{ value: 'news', text: \"新闻类\" },\r\n\t\t\t\t\t{ value: 'task', text: \"任务类\" }\r\n\t\t\t\t  ],\r\n\t\t\t  range2: [\r\n\t\t\t\t\t{ value: '0', text: \"通知\" },\r\n\t\t\t\t\t{ value: '1', text: \"商务\" },\r\n\t\t\t\t\t{ value: '2', text: \"作品\" },\r\n\t\t\t\t\t{ value: '3', text: \"演出活动\" },\r\n\t\t\t   ],\r\n\t\t\t   sf:[\r\n\t\t\t\t   { value: '0', text: \"否\" },\r\n\t\t\t\t   { value: '1', text: \"是\" },\r\n\t\t\t   ]\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(option) {\r\n\t\t\tlet id=option.id\r\n\t\t\tconsole.log(option,id)\r\n\t\t\tif(id){\r\n\t\t\t\tthis.getDetail(id)\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\teditInfo(item){\r\n\t\t\t\tthis.formData= {...item};\r\n\t\t\t},\r\n\t\t\tadd() {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '处理中...'\r\n\t\t\t\t})\r\n\t\t\t\tuniCloud.callFunction({\r\n\t\t\t\t\tname: 'notice-add',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\ttype:'add',\r\n\t\t\t\t\t\tparams:this.formData\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then((res) => {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\tcontent: `成功添加一条数据，文档id为：${res.result.id}`,\r\n\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.reset()\r\n\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\tcontent: `添加数据失败，错误信息为：${err.message}`,\r\n\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t})\r\n\t\t\t\t\tconsole.error(err)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tremove(id) {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '处理中...'\r\n\t\t\t\t})\r\n\t\t\t\tuniCloud.callFunction({\r\n\t\t\t\t\tname: 'notice-add',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\ttype:'del',\r\n\t\t\t\t\t\tparams:this.formData._id\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then((res) => {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\tcontent: `删除成功`,\r\n\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.reset()\r\n\t\t\t\t\t//console.log(res)\r\n\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\tcontent: `删除失败，错误信息为：${err.message}`,\r\n\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t})\r\n\t\t\t\t\tconsole.error(err)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tupdate() {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '处理中...'\r\n\t\t\t\t})\r\n\t\t\t\tuniCloud.callFunction({\r\n\t\t\t\t\tname: 'notice-add',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\ttype:'update',\r\n\t\t\t\t\t\tparams:this.formData\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then((res) => {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\tcontent: `更新成功`,\r\n\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t})\r\n\t\t\t\t\t//console.log(res)\r\n\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\tcontent: `更新操作执行失败，错误信息为：${err.message}`,\r\n\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t})\r\n\t\t\t\t\tconsole.error(err)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tsubmit(type) {\r\n\t\t\t\tif(type==='add'){\r\n\t\t\t\t\tthis.add()\r\n\t\t\t\t}else if(type==='update'){\r\n\t\t\t\t\tthis.update()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetDetail(id) {\r\n\t\t\t\tthis.reset()\r\n\t\t\t\tthis.id=id\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '处理中...'\r\n\t\t\t\t})\r\n\t\t\t\tuniCloud.callFunction({\r\n\t\t\t\t\tname: 'notice-add',\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\ttype:'view',\r\n\t\t\t\t\t\tid\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then((res) => {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\tthis.formData=res.result.data[0] \r\n\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\tcontent: `查询失败，错误信息为：${err.message}`,\r\n\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t})\r\n\t\t\t\t\tconsole.error(err)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetList() {\r\n\t\t\t\tthis.reset()\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '处理中...'\r\n\t\t\t\t})\r\n\t\t\t\tuniCloud.callFunction({\r\n\t\t\t\t\tname: 'notice-add',\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\ttype:'get',\r\n\t\t\t\t\t\ttitle:this.search.title\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then((res) => {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.list=res.result.data ||[]\r\n\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\tcontent: `查询失败，错误信息为：${err.message}`,\r\n\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t})\r\n\t\t\t\t\tconsole.error(err)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\treset(){\r\n\t\t\t\tthis.formData={\r\n\t\t\t\t\ttitle:'',\r\n\t\t\t\t\tbz:'',\r\n\t\t\t\t\ttop:'',\r\n\t\t\t\t\ttype:'',\r\n\t\t\t\t\tcontent:'',\r\n\t\t\t\t\thide:'',\r\n\t\t\t\t\tis_today_important:'',\r\n\t\t\t\t\tclassType:''\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\n</script>\n\n<style lang=\"scss\">\n\t .page{\r\n\t\t padding: 5px;\r\n\t }    \r\n\t .search-box{\r\n\t \t\t  background: #eee;\r\n\t \t\t  margin-bottom: 15px;\r\n\t \t\t  padding: 3px;\r\n\t }   \r\n\t \t\t.list{\r\n\t \t\t\tmargin-bottom: 20px;\r\n\t \t\t\t.list-item{\r\n\t \t\t\t\tbackground: #ddd;\r\n\t \t\t\t\tmargin-bottom: 5px;\r\n\t \t\t\t\tpadding: 3px;\r\n\t \t\t\t}\r\n\t \t\t}\r\n\t   .title{color: cadetblue;}\r\n\t   .uni-form-item{margin-bottom: 5px;}\r\n\t   .flex-row{display: flex;}\n</style>\n","import MiniProgramPage from 'E:/web/cooqi/fjywq/pages/edit/notice.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","uniCloud"],"mappings":"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"}