{"version":3,"file":"rili.js","sources":["pages/edit/rili.vue","D:/ruanjian/HBuilderX.3.6.18.20230117/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvZWRpdC9yaWxpLnZ1ZQ"],"sourcesContent":["<template>\n\t<view>\n\t\t<view class=\"search-box\">\r\n\t\t\t<text class=\"title\">日期搜索</text>\r\n\t\t\t<input class=\"uni-input\" name=\"date\" v-model=\"search.date\" placeholder=\"请输入\"  @blur=\"getList\"/>\r\n\t\t</view>\r\n\t\t<view class=\"list\">\r\n\t\t\t<view class=\"list-item\" v-for=\"(item,i) in list\" :key=\"i\" @click=\"editInfo(item)\">\r\n\t\t\t\t{{item.date}}-{{item.title}}\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t <view class=\"page\">\r\n\t\t      <form>\r\n\t\t\t\t  <view class=\"uni-form-item \">\r\n\t\t\t\t\t<text class=\"title\">日期</text>\r\n\t\t\t\t\t<input class=\"uni-input\" name=\"date\" v-model=\"formData.date\" placeholder=\"请输入\"  />\r\n\t\t\t\t  </view>\r\n\t\t\t\t  \r\n\t\t\t\t\t<view class=\"uni-form-item\">\r\n\t\t\t\t\t  <text class=\"title\">标题</text>\r\n\t\t\t\t\t  <input class=\"uni-input\" name=\"title\" v-model=\"formData.title\" placeholder=\"请输入\"  />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t\t<view class=\"uni-form-item\">\r\n\t\t\t\t\t  <text class=\"title\">备注</text>\r\n\t\t\t\t\t  <textarea name=\"bz\" v-model=\"formData.bz\" placeholder=\"请输入备注\" style=\"background: #FFF;\" />\r\n\t\t\t\t\t\r\n\t\t\t\t\t</view>\r\n\t\t        \r\n\t\t        \r\n\t\t       \r\n\t\t        <view class=\"flex-row\" v-if=\"formData._id\">\r\n\t\t          <button type=\"primary\" class=\"uni-button\" @click=\"submit('update')\" >更新</button>\r\n\t\t          <button type=\"primary\" class=\"uni-button\" @click=\"remove(formData._id)\">删除</button>\r\n\t\t         <button type=\"primary\" class=\"uni-button\" @click=\"clearForm\" >清空</button>\r\n\t\t        </view>\r\n\t\t\t\t <button type=\"primary\" class=\"uni-button\" @click=\"submit('add')\" v-else>保存</button>\r\n\t\t      </form>\r\n\r\n\t\t </view>\n\t</view>\n</template>\n\n<script>\n\texport default{\r\n\t\tdata(){\r\n\t\t\treturn{\r\n\t\t\t\tlist:[],\r\n\t\t\t\tformData:{\r\n\t\t\t\t\ttitle:'',\r\n\t\t\t\t\tbz:'',\r\n\t\t\t\t\tdate:''\r\n\t\t\t\t},\r\n\t\t\t\tsearch:{\r\n\t\t\t\t\tdate:''\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\t\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\teditInfo(item){\r\n\t\t\t\tthis.formData= {...item};\r\n\t\t\t},\r\n\t\t\tadd() {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '处理中...'\r\n\t\t\t\t})\r\n\t\t\t\tuniCloud.callFunction({\r\n\t\t\t\t\tname: 'rili-add',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\ttype:'add',\r\n\t\t\t\t\t\tparams:this.formData\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then((res) => {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\tcontent: `成功添加一条数据，文档id为：${res.result.id}`,\r\n\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.clearForm()\r\n\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\tcontent: `添加数据失败，错误信息为：${err.message}`,\r\n\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t})\r\n\t\t\t\t\tconsole.error(err)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tremove(id) {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '处理中...'\r\n\t\t\t\t})\r\n\t\t\t\tuniCloud.callFunction({\r\n\t\t\t\t\tname: 'rili-add',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\ttype:'del',\r\n\t\t\t\t\t\tparams:this.formData._id\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then((res) => {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\tcontent: `删除成功`,\r\n\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.getList()\r\n\t\t\t\t\t//console.log(res)\r\n\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\tcontent: `删除失败，错误信息为：${err.message}`,\r\n\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t})\r\n\t\t\t\t\tconsole.error(err)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tupdate() {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '处理中...'\r\n\t\t\t\t})\r\n\t\t\t\tuniCloud.callFunction({\r\n\t\t\t\t\tname: 'rili-add',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\ttype:'update',\r\n\t\t\t\t\t\tparams:this.formData\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then((res) => {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\tcontent: `更新成功`,\r\n\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.getList()\r\n\t\t\t\t\t//console.log(res)\r\n\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\tcontent: `更新操作执行失败，错误信息为：${err.message}`,\r\n\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t})\r\n\t\t\t\t\tconsole.error(err)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tsubmit(type) {\r\n\t\t\t\tif(type==='add'){\r\n\t\t\t\t\tthis.add()\r\n\t\t\t\t}else if(type==='update'){\r\n\t\t\t\t\tthis.update()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetList() {\r\n\t\t\t\t\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '处理中...'\r\n\t\t\t\t})\r\n\t\t\t\tuniCloud.callFunction({\r\n\t\t\t\t\tname: 'rili-get',\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\tsearch:this.search\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then((res) => {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.list=res.result.data ||[]\r\n\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\tcontent: `查询失败，错误信息为：${err.message}`,\r\n\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t})\r\n\t\t\t\t\tconsole.error(err)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tclearForm(){\r\n\t\t\t\tthis.formData._id=''\r\n\t\t\t\tthis.formData.date=''\r\n\t\t\t\tthis.formData.title=''\r\n\t\t\t\tthis.formData.bz=''\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t}\n</script>\n\n<style lang=\"scss\">\r\n\t.flex-row{display: flex;}\r\n\t.title{color: cadetblue;}\r\n\t.page{\r\n\t\tpadding: 5px;\r\n\t}\r\n\t.uni-form-item{\r\n\t\tmargin-bottom: 10px;\r\n\t}\n\t  .search-box{\r\n\t\t  background: #eee;\r\n\t\t  margin-bottom: 15px;\r\n\t\t  padding: 3px;\r\n\t  }   \r\n\t\t.list{\r\n\t\t\tmargin-bottom: 20px;\r\n\t\t\t.list-item{\r\n\t\t\t\tbackground: #ddd;\r\n\t\t\t\tmargin-bottom: 5px;\r\n\t\t\t\tpadding: 3px;\r\n\t\t\t}\r\n\t\t}\n</style>\n","import MiniProgramPage from 'E:/web/cooqi/fjywq/pages/edit/rili.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","uniCloud"],"mappings":"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"}